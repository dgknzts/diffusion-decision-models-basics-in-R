<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Simulating the Diffusion Decision Model (DDM) • DDM_Basics_R</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Simulating the Diffusion Decision Model (DDM)">
<meta name="description" content="How to simulate the DDM in R and understand its parameters.">
<meta property="og:description" content="How to simulate the DDM in R and understand its parameters.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">DDM_Basics_R</a>

    <small class="nav-text text-default me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Simulating the Diffusion Decision Model (DDM)</h1>
                        <h4 data-toc-skip class="author">Dogukan Nami
Oztas</h4>
            
            <h4 data-toc-skip class="date">2025-05-16</h4>
      

      <div class="d-none name"><code>02_simulating_diffusion_model.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction-to-the-diffusion-decision-model-ddm">Introduction to the Diffusion Decision Model (DDM)<a class="anchor" aria-label="anchor" href="#introduction-to-the-diffusion-decision-model-ddm"></a>
</h2>
<p>The Diffusion Decision Model (DDM) is a prominent mathematical model
used in psychology and cognitive neuroscience to account for reaction
times (RTs) and accuracy in two-alternative forced-choice (2AFC)
decision tasks. It conceptualizes decision-making as a process of noisy
evidence accumulation over time towards one of two decision
boundaries.</p>
<p>The DDM is essentially a continuous-time version of the random walk
model we explored in the previous vignette. Instead of discrete steps,
evidence is assumed to accumulate continuously, influenced by both a
systematic “drift” (reflecting the quality of stimulus information) and
random “noise” (reflecting moment-to-moment variability in
processing).</p>
<p>This vignette will demonstrate how to simulate the DDM using the
functions created in R/02_diffusion_simulator.R.</p>
</div>
<div class="section level2">
<h2 id="key-ddm-parameters">Key DDM Parameters<a class="anchor" aria-label="anchor" href="#key-ddm-parameters"></a>
</h2>
<p>Our DDM simulator, simulate_diffusion_trial(), uses the Feller (1968)
convention, where evidence accumulates between a lower boundary at 0 and
an upper boundary at a.</p>
<ul>
<li>
<p><strong>v (Drift Rate):</strong></p>
<ul>
<li><p>The average rate of evidence accumulation.</p></li>
<li><p>A positive v indicates drift towards the upper boundary a (often
representing the “correct” response for a given stimulus).</p></li>
<li><p>A negative v indicates drift towards the lower boundary
0.</p></li>
<li><p>The magnitude of v reflects the quality or strength of the
stimulus information (e.g., higher discriminability leads to a larger
|v|).</p></li>
</ul>
</li>
<li>
<p><strong>a (Threshold Separation):</strong></p>
<ul>
<li><p>The distance between the lower boundary (0) and the upper
boundary (a).</p></li>
<li><p>Represents the amount of evidence required to make a
decision.</p></li>
<li><p>Higher values of a generally lead to slower but more accurate
responses (speed-accuracy tradeoff).</p></li>
</ul>
</li>
<li>
<p><strong>z (Starting Point):</strong></p>
<ul>
<li><p>The initial state of the evidence accumulator, where 0 &lt; z
&lt; a.</p></li>
<li><p>Represents an initial bias towards one of the responses.</p></li>
<li><p>z = a/2 indicates an unbiased starting point.</p></li>
<li><p>z &gt; a/2 indicates a bias towards the upper boundary
a.</p></li>
<li><p>z &lt; a/2 indicates a bias towards the lower boundary
0.</p></li>
</ul>
</li>
<li>
<p><strong>s (Noise / Infinitesimal Standard
Deviation):</strong></p>
<ul>
<li><p>The standard deviation of the normally distributed increments in
the evidence accumulation process (scaled by sqrt(dt)).</p></li>
<li><p>Represents moment-to-moment variability or noise.</p></li>
<li><p>In many DDM applications, s is fixed (often to 0.1) to allow
other parameters to be estimated on a common scale.</p></li>
</ul>
</li>
<li>
<p><strong>ter (or t0, Non-Decision Time):</strong></p>
<ul>
<li><p>The time taken for processes outside of the decision-making
stage, such as stimulus encoding and response execution.</p></li>
<li><p>It is added to the simulated decision time to yield the total
predicted RT.</p></li>
</ul>
</li>
<li>
<p><strong>dt (Time Step):</strong></p>
<ul>
<li>A small time interval used in the simulation to approximate the
continuous diffusion process (Euler-Maruyama method). Smaller dt leads
to higher accuracy but longer computation time.</li>
</ul>
</li>
</ul>
</div>
<div class="section level2">
<h2 id="simulating-a-single-ddm-trial">Simulating a Single DDM Trial<a class="anchor" aria-label="anchor" href="#simulating-a-single-ddm-trial"></a>
</h2>
<p>The simulate_diffusion_trial() function simulates one instance of the
evidence accumulation process.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">102</span><span class="op">)</span> <span class="co"># For reproducibility</span></span>
<span></span>
<span><span class="co"># Example: Positive drift, unbiased start</span></span>
<span><span class="va">trial_A</span> <span class="op">&lt;-</span> <span class="fu">simulate_diffusion_trial</span><span class="op">(</span>v <span class="op">=</span> <span class="fl">0.2</span>, a <span class="op">=</span> <span class="fl">1.0</span>, z <span class="op">=</span> <span class="fl">0.5</span>, s <span class="op">=</span> <span class="fl">0.1</span>, ter <span class="op">=</span> <span class="fl">0.15</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Trial A: Choice ="</span>, <span class="va">trial_A</span><span class="op">$</span><span class="va">choice</span>, <span class="st">"(1=Upper, 0=Lower), RT ="</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">trial_A</span><span class="op">$</span><span class="va">rt</span>, <span class="fl">3</span><span class="op">)</span>, <span class="st">"s"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "Trial A: Choice = 1 (1=Upper, 0=Lower), RT = 2.119 s"</span></span></code></pre>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Example: Negative drift, biased towards upper</span></span>
<span><span class="va">trial_B</span> <span class="op">&lt;-</span> <span class="fu">simulate_diffusion_trial</span><span class="op">(</span>v <span class="op">=</span> <span class="op">-</span><span class="fl">0.2</span>, a <span class="op">=</span> <span class="fl">1.0</span>, z <span class="op">=</span> <span class="fl">0.7</span>, s <span class="op">=</span> <span class="fl">0.1</span>, ter <span class="op">=</span> <span class="fl">0.15</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Trial B: Choice ="</span>, <span class="va">trial_B</span><span class="op">$</span><span class="va">choice</span>, <span class="st">", RT ="</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">trial_B</span><span class="op">$</span><span class="va">rt</span>, <span class="fl">3</span><span class="op">)</span>, <span class="st">"s"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "Trial B: Choice = 0 , RT = 3.553 s"</span></span></code></pre>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Example: No drift, unbiased start</span></span>
<span><span class="va">trial_C</span> <span class="op">&lt;-</span> <span class="fu">simulate_diffusion_trial</span><span class="op">(</span>v <span class="op">=</span> <span class="fl">0.0</span>, a <span class="op">=</span> <span class="fl">1.0</span>, z <span class="op">=</span> <span class="fl">0.5</span>, s <span class="op">=</span> <span class="fl">0.1</span>, ter <span class="op">=</span> <span class="fl">0.15</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Trial C: Choice ="</span>, <span class="va">trial_C</span><span class="op">$</span><span class="va">choice</span>, <span class="st">", RT ="</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">trial_C</span><span class="op">$</span><span class="va">rt</span>, <span class="fl">3</span><span class="op">)</span>, <span class="st">"s"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "Trial C: Choice = NA , RT = NA s"</span></span></code></pre>
<p>The choice is 1 if the upper boundary a is reached, and 0 if the
lower boundary 0 is reached.</p>
</div>
<div class="section level2">
<h2 id="simulating-a-ddm-experiment">Simulating a DDM Experiment<a class="anchor" aria-label="anchor" href="#simulating-a-ddm-experiment"></a>
</h2>
<p>To understand the model’s predictions for RT distributions and choice
probabilities, we simulate many trials using
simulate_diffusion_experiment().</p>
<p>Let’s simulate an experiment with parameters that should yield a mix
of choices and a right-skewed RT distribution.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">202</span><span class="op">)</span></span>
<span><span class="va">n_sim_trials</span> <span class="op">&lt;-</span> <span class="fl">2000</span> <span class="co"># Use a good number of trials for smooth distributions</span></span>
<span></span>
<span><span class="co"># Define a set of parameters</span></span>
<span><span class="va">params</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  v <span class="op">=</span> <span class="fl">0.15</span>,      <span class="co"># Moderate positive drift</span></span>
<span>  a <span class="op">=</span> <span class="fl">1.2</span>,       <span class="co"># Threshold</span></span>
<span>  z <span class="op">=</span> <span class="fl">0.6</span>,       <span class="co"># Unbiased start (a/2)</span></span>
<span>  s <span class="op">=</span> <span class="fl">0.5</span>,       <span class="co"># Standard noise</span></span>
<span>  ter <span class="op">=</span> <span class="fl">0.2</span>,     <span class="co"># Non-decision time</span></span>
<span>  dt <span class="op">=</span> <span class="fl">0.01</span>     <span class="co"># Time step</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">ddm_data</span> <span class="op">&lt;-</span> <span class="fu">simulate_diffusion_experiment</span><span class="op">(</span></span>
<span>  n_trials <span class="op">=</span> <span class="va">n_sim_trials</span>,</span>
<span>  v <span class="op">=</span> <span class="va">params</span><span class="op">$</span><span class="va">v</span>,</span>
<span>  a <span class="op">=</span> <span class="va">params</span><span class="op">$</span><span class="va">a</span>,</span>
<span>  z <span class="op">=</span> <span class="va">params</span><span class="op">$</span><span class="va">z</span>,</span>
<span>  s <span class="op">=</span> <span class="va">params</span><span class="op">$</span><span class="va">s</span>,</span>
<span>  ter <span class="op">=</span> <span class="va">params</span><span class="op">$</span><span class="va">ter</span>,</span>
<span>  dt <span class="op">=</span> <span class="va">params</span><span class="op">$</span><span class="va">dt</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Display the first few rows</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">ddm_data</span><span class="op">)</span>, caption <span class="op">=</span> <span class="st">"First 6 trials of the simulated DDM experiment."</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<caption>First 6 trials of the simulated DDM experiment.</caption>
<thead><tr class="header">
<th align="right">trial</th>
<th align="right">choice</th>
<th align="right">rt</th>
<th align="right">decision_time</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0.74</td>
<td align="right">0.54</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">1</td>
<td align="right">1.69</td>
<td align="right">1.49</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">0</td>
<td align="right">3.21</td>
<td align="right">3.01</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="right">0</td>
<td align="right">0.88</td>
<td align="right">0.68</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="right">1</td>
<td align="right">1.25</td>
<td align="right">1.05</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="right">0</td>
<td align="right">0.93</td>
<td align="right">0.73</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Summary of the data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">ddm_data</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##      trial            choice             rt        decision_time  </span></span>
<span><span class="co">##  Min.   :   1.0   Min.   :0.0000   Min.   :0.310   Min.   :0.110  </span></span>
<span><span class="co">##  1st Qu.: 500.8   1st Qu.:0.0000   1st Qu.:0.820   1st Qu.:0.620  </span></span>
<span><span class="co">##  Median :1000.5   Median :1.0000   Median :1.310   Median :1.110  </span></span>
<span><span class="co">##  Mean   :1000.5   Mean   :0.6779   Mean   :1.607   Mean   :1.407  </span></span>
<span><span class="co">##  3rd Qu.:1500.2   3rd Qu.:1.0000   3rd Qu.:2.080   3rd Qu.:1.880  </span></span>
<span><span class="co">##  Max.   :2000.0   Max.   :1.0000   Max.   :5.100   Max.   :4.900  </span></span>
<span><span class="co">##                   NA's   :47       NA's   :47      NA's   :47</span></span></code></pre>
<div class="section level3">
<h3 id="analyzing-ddm-experiment-results">Analyzing DDM Experiment Results<a class="anchor" aria-label="anchor" href="#analyzing-ddm-experiment-results"></a>
</h3>
<div class="section level4">
<h4 id="choice-proportions">
<strong>1. Choice Proportions</strong><a class="anchor" aria-label="anchor" href="#choice-proportions"></a>
</h4>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Filter out NA choices (if max_decision_time was hit)</span></span>
<span><span class="va">valid_ddm_choices</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/na.fail.html" class="external-link">na.omit</a></span><span class="op">(</span><span class="va">ddm_data</span><span class="op">$</span><span class="va">choice</span><span class="op">)</span></span>
<span></span>
<span><span class="va">choice_counts_ddm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">valid_ddm_choices</span><span class="op">)</span></span>
<span><span class="va">choice_proportions_ddm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/proportions.html" class="external-link">prop.table</a></span><span class="op">(</span><span class="va">choice_counts_ddm</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"DDM Choice Counts:"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "DDM Choice Counts:"</span></span></code></pre>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">choice_counts_ddm</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## valid_ddm_choices</span></span>
<span><span class="co">##    0    1 </span></span>
<span><span class="co">##  629 1324</span></span></code></pre>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"DDM Choice Proportions:"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "DDM Choice Proportions:"</span></span></code></pre>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">choice_proportions_ddm</span><span class="op">)</span>, col.names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Choice"</span>, <span class="st">"Proportion"</span><span class="op">)</span>, caption <span class="op">=</span> <span class="st">"DDM Choice Proportions"</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<caption>DDM Choice Proportions</caption>
<thead><tr class="header">
<th align="left">Choice</th>
<th align="right">Proportion</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">0</td>
<td align="right">0.3220686</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="right">0.6779314</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/barplot.html" class="external-link">barplot</a></span><span class="op">(</span><span class="va">choice_proportions_ddm</span>,</span>
<span>        main <span class="op">=</span> <span class="st">"DDM Choice Proportions"</span>,</span>
<span>        xlab <span class="op">=</span> <span class="st">"Choice (1 = Upper, 0 = Lower)"</span>,</span>
<span>        ylab <span class="op">=</span> <span class="st">"Proportion"</span>,</span>
<span>        names.arg <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Lower Boundary (0)"</span>, <span class="st">"Upper Boundary (1)"</span><span class="op">)</span>, <span class="co"># More descriptive labels</span></span>
<span>        col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"salmon"</span>, <span class="st">"lightblue"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="02_simulating_diffusion_model_files/figure-html/unnamed-chunk-2-1.png" width="700" style="display: block; margin: auto;"></p>
<p>With a positive drift (v = 0.15), we expect more choices for the
upper boundary (Choice 1).</p>
</div>
<div class="section level4">
<h4 id="reaction-time-rt-distributions">
<strong>2. Reaction Time (RT) Distributions</strong><a class="anchor" aria-label="anchor" href="#reaction-time-rt-distributions"></a>
</h4>
<p>The DDM is well-known for predicting positively skewed RT
distributions.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Filter out NA RTs</span></span>
<span><span class="va">valid_ddm_rt_data</span> <span class="op">&lt;-</span> <span class="va">ddm_data</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">rt</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">valid_ddm_rt_data</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span></span>
<span>  <span class="co"># Plot for decision_time only</span></span>
<span>  <span class="va">p_rt_decision</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span><span class="va">valid_ddm_rt_data</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">decision_time</span>, fill <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">choice</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">geom_histogram</span><span class="op">(</span>binwidth <span class="op">=</span> <span class="fl">0.025</span>, alpha <span class="op">=</span> <span class="fl">0.8</span>, position <span class="op">=</span> <span class="st">"identity"</span>, color<span class="op">=</span><span class="st">"black"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">choice</span>, labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Lower Boundary (0)"</span>, <span class="st">"Upper Boundary (1)"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">labs</span><span class="op">(</span></span>
<span>      title <span class="op">=</span> <span class="st">"DDM Decision Time Distributions"</span>,</span>
<span>      x <span class="op">=</span> <span class="st">"Decision Time (s)"</span>,</span>
<span>      y <span class="op">=</span> <span class="st">"Frequency"</span>,</span>
<span>      fill <span class="op">=</span> <span class="st">"Choice"</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">theme_minimal</span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">p_rt_decision</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co"># Summary statistics for RTs</span></span>
<span>  <span class="va">rt_summary_ddm</span> <span class="op">&lt;-</span> <span class="va">valid_ddm_rt_data</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">group_by</span><span class="op">(</span><span class="va">choice</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">summarise</span><span class="op">(</span></span>
<span>      Mean_RT <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">rt</span><span class="op">)</span>,</span>
<span>      Median_RT <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html" class="external-link">median</a></span><span class="op">(</span><span class="va">rt</span><span class="op">)</span>,</span>
<span>      SD_RT <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html" class="external-link">sd</a></span><span class="op">(</span><span class="va">rt</span><span class="op">)</span>,</span>
<span>      Min_RT <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">rt</span><span class="op">)</span>,</span>
<span>      Max_RT <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">rt</span><span class="op">)</span>,</span>
<span>      N <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">ungroup</span><span class="op">(</span><span class="op">)</span> <span class="co"># Ungroup for kable</span></span>
<span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">rt_summary_ddm</span>, caption <span class="op">=</span> <span class="st">"Summary Statistics for DDM RTs by Choice"</span><span class="op">)</span></span>
<span>  <span class="co"># Check for skew: Mean &gt; Median</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"Mean RTs:"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">rt_summary_ddm</span><span class="op">$</span><span class="va">Mean_RT</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"Median RTs:"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">rt_summary_ddm</span><span class="op">$</span><span class="va">Median_RT</span><span class="op">)</span></span>
<span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"No valid trials with RTs to plot (all may have hit max_decision_time)."</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p><img src="02_simulating_diffusion_model_files/figure-html/ddm_rt_distributions-1.png" width="700" style="display: block; margin: auto;"></p>
<pre><code><span><span class="co">## [1] "Mean RTs:"</span></span>
<span><span class="co">## [1] 1.589921 1.615491</span></span>
<span><span class="co">## [1] "Median RTs:"</span></span>
<span><span class="co">## [1] 1.31 1.31</span></span></code></pre>
<p>We should observe the characteristic right-skew (positive skew) in
these distributions, where the mean RT is typically greater than the
median RT. The decision time plot helps isolate the skew predicted by
the accumulation process itself, separate from the non-decision
time.</p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="visualizing-evidence-accumulation-paths-optional-advanced">Visualizing Evidence Accumulation Paths (Optional Advanced)<a class="anchor" aria-label="anchor" href="#visualizing-evidence-accumulation-paths-optional-advanced"></a>
</h2>
<p>To gain a more intuitive understanding of the DDM, it’s helpful to
visualize the actual paths of evidence accumulation on a few example
trials. This is similar to Figure 1 in “An Introduction to the Diffusion
Model of Decision-Making” by Smith and Ratcliff.</p>
<p>We’ve created a modified function,
`simulate_diffusion_trial_with_path()`, which, in addition to the choice
and RT, also returns the history of evidence levels over time for a
single trial.</p>
<p>Let’s simulate a few trials and plot their paths. We’ll aim for a
scenario that can produce varied outcomes.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">path_params</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  v <span class="op">=</span> <span class="fl">0.1</span>,    <span class="co"># A moderate drift, so paths aren't too quick</span></span>
<span>  a <span class="op">=</span> <span class="fl">1.0</span>,    <span class="co"># Threshold</span></span>
<span>  z <span class="op">=</span> <span class="fl">0.5</span>,    <span class="co"># Unbiased start</span></span>
<span>  s <span class="op">=</span> <span class="fl">0.5</span>,   <span class="co"># A bit more noise to make paths interesting</span></span>
<span>  dt <span class="op">=</span> <span class="fl">0.01</span>,</span>
<span>  ter <span class="op">=</span> <span class="fl">0.1</span>   <span class="co"># ter is not directly used in path plotting but good for context</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">n_paths_to_plot</span> <span class="op">&lt;-</span> <span class="fl">5</span> <span class="co"># Number of example paths</span></span>
<span><span class="va">all_paths_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">vector</a></span><span class="op">(</span><span class="st">"list"</span>, <span class="va">n_paths_to_plot</span><span class="op">)</span> <span class="co"># To store data for each path</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">343</span><span class="op">)</span> <span class="co"># For reproducibility of these specific paths</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="va">n_paths_to_plot</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">trial_with_path</span> <span class="op">&lt;-</span> <span class="fu">simulate_diffusion_trial_with_path</span><span class="op">(</span></span>
<span>    v <span class="op">=</span> <span class="va">path_params</span><span class="op">$</span><span class="va">v</span>,</span>
<span>    a <span class="op">=</span> <span class="va">path_params</span><span class="op">$</span><span class="va">a</span>,</span>
<span>    z <span class="op">=</span> <span class="va">path_params</span><span class="op">$</span><span class="va">z</span>,</span>
<span>    s <span class="op">=</span> <span class="va">path_params</span><span class="op">$</span><span class="va">s</span>,</span>
<span>    dt <span class="op">=</span> <span class="va">path_params</span><span class="op">$</span><span class="va">dt</span>,</span>
<span>    ter <span class="op">=</span> <span class="va">path_params</span><span class="op">$</span><span class="va">ter</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="co"># Add a trial identifier to the path data</span></span>
<span>  <span class="va">trial_with_path</span><span class="op">$</span><span class="va">path_data</span><span class="op">$</span><span class="va">trial_id</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Trial"</span>, <span class="va">i</span><span class="op">)</span></span>
<span>  <span class="va">trial_with_path</span><span class="op">$</span><span class="va">path_data</span><span class="op">$</span><span class="va">final_choice</span> <span class="op">&lt;-</span> <span class="va">trial_with_path</span><span class="op">$</span><span class="va">choice</span> <span class="co"># Store choice for coloring</span></span>
<span>  <span class="va">all_paths_data</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">trial_with_path</span><span class="op">$</span><span class="va">path_data</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Combine all path data into a single data frame for ggplot</span></span>
<span><span class="va">plot_df_paths</span> <span class="op">&lt;-</span> <span class="fu">bind_rows</span><span class="op">(</span><span class="va">all_paths_data</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get the threshold 'a' (assuming it's the same for all these trials)</span></span>
<span><span class="va">threshold_a</span> <span class="op">&lt;-</span> <span class="va">path_params</span><span class="op">$</span><span class="va">a</span></span></code></pre></div>
<p>Now we can plot these paths using ggplot2.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">plot_df_paths</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="va">plot_df_paths</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">time_s</span>, y <span class="op">=</span> <span class="va">evidence</span>, group <span class="op">=</span> <span class="va">trial_id</span>, color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">final_choice</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">geom_line</span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.8</span>, linewidth <span class="op">=</span> <span class="fl">0.7</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">geom_hline</span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fl">0</span>, linetype <span class="op">=</span> <span class="st">"dashed"</span>, color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">geom_hline</span><span class="op">(</span>yintercept <span class="op">=</span> <span class="va">threshold_a</span>, linetype <span class="op">=</span> <span class="st">"dashed"</span>, color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">annotate</span><span class="op">(</span><span class="st">"text"</span>, x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">plot_df_paths</span><span class="op">$</span><span class="va">time_s</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">*</span> <span class="fl">0.9</span>, y <span class="op">=</span> <span class="va">threshold_a</span> <span class="op">+</span> <span class="fl">0.05</span>, label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Boundary a ="</span>, <span class="va">threshold_a</span><span class="op">)</span>, hjust <span class="op">=</span> <span class="fl">1</span>, size<span class="op">=</span><span class="fl">3</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">annotate</span><span class="op">(</span><span class="st">"text"</span>, x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">plot_df_paths</span><span class="op">$</span><span class="va">time_s</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">*</span> <span class="fl">0.9</span>, y <span class="op">=</span> <span class="op">-</span><span class="fl">0.05</span>, label <span class="op">=</span> <span class="st">"Boundary 0"</span>, hjust <span class="op">=</span> <span class="fl">1</span>, size<span class="op">=</span><span class="fl">3</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">scale_color_manual</span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"0"</span> <span class="op">=</span> <span class="st">"salmon"</span>, <span class="st">"1"</span> <span class="op">=</span> <span class="st">"steelblue"</span>, <span class="st">"NA"</span> <span class="op">=</span> <span class="st">"grey"</span><span class="op">)</span>,</span>
<span>                       labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"0"</span> <span class="op">=</span> <span class="st">"Lower Boundary"</span>, <span class="st">"1"</span> <span class="op">=</span> <span class="st">"Upper Boundary"</span>, <span class="st">"NA"</span><span class="op">=</span> <span class="st">"Timeout"</span><span class="op">)</span>,</span>
<span>                       name <span class="op">=</span> <span class="st">"Outcome"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">labs</span><span class="op">(</span></span>
<span>      title <span class="op">=</span> <span class="st">"Example DDM Evidence Accumulation Paths"</span>,</span>
<span>      x <span class="op">=</span> <span class="st">"Decision Time (s)"</span>,</span>
<span>      y <span class="op">=</span> <span class="st">"Accumulated Evidence"</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">theme_minimal</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">theme</span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"top"</span><span class="op">)</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"No path data to plot."</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p><img src="02_simulating_diffusion_model_files/figure-html/ddm_path_plotting-1.png" width="768" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Display the first few rows of the combined path data</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">plot_df_paths</span><span class="op">)</span>, caption <span class="op">=</span> <span class="st">"Sample of combined path data for plotting."</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<caption>Sample of combined path data for plotting.</caption>
<thead><tr class="header">
<th align="right">time_s</th>
<th align="right">evidence</th>
<th align="left">trial_id</th>
<th align="right">final_choice</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">0.00</td>
<td align="right">0.5000000</td>
<td align="left">Trial 1</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="right">0.01</td>
<td align="right">0.4311612</td>
<td align="left">Trial 1</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="right">0.02</td>
<td align="right">0.4583268</td>
<td align="left">Trial 1</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="right">0.03</td>
<td align="right">0.4664400</td>
<td align="left">Trial 1</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="right">0.04</td>
<td align="right">0.4251076</td>
<td align="left">Trial 1</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="right">0.05</td>
<td align="right">0.4055165</td>
<td align="left">Trial 1</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<div class="section level3">
<h3 id="visualizing-evidence-accumulation-paths-with-helper-function">Visualizing Evidence Accumulation Paths with Helper Function<a class="anchor" aria-label="anchor" href="#visualizing-evidence-accumulation-paths-with-helper-function"></a>
</h3>
<p>To better visualize the DDM process, we’ll use our custom helper
function `plot_ddm_paths_with_histograms()`. This function will display
several trial paths, decision boundaries, the starting point, and the
average drift line. It will also generate separate plots for the RT
distributions at each boundary.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Parameters for path visualization</span></span>
<span><span class="va">path_plot_params_int</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  v <span class="op">=</span> <span class="fl">0.05</span>,    <span class="co"># Moderate positive drift</span></span>
<span>  a <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  z <span class="op">=</span> <span class="fl">0.5</span>,    <span class="co"># Unbiased</span></span>
<span>  s <span class="op">=</span> <span class="fl">0.4</span>,   <span class="co"># More noise</span></span>
<span>  ter <span class="op">=</span> <span class="fl">0.0</span>,  <span class="co"># For ridges, we're plotting decision_time so ter=0 in sim is cleaner</span></span>
<span>  dt <span class="op">=</span> <span class="fl">0.01</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">n_example_paths_int</span> <span class="op">&lt;-</span> <span class="fl">200</span> <span class="co"># Need more trials for decent ridges</span></span>
<span></span>
<span><span class="co"># Simulate the trials</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">505</span><span class="op">)</span></span>
<span><span class="va">example_trials_list_int</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">vector</a></span><span class="op">(</span><span class="st">"list"</span>, <span class="va">n_example_paths_int</span><span class="op">)</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="va">n_example_paths_int</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">example_trials_list_int</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu">simulate_diffusion_trial_with_path</span><span class="op">(</span></span>
<span>    v <span class="op">=</span> <span class="va">path_plot_params_int</span><span class="op">$</span><span class="va">v</span>,</span>
<span>    a <span class="op">=</span> <span class="va">path_plot_params_int</span><span class="op">$</span><span class="va">a</span>,</span>
<span>    z <span class="op">=</span> <span class="va">path_plot_params_int</span><span class="op">$</span><span class="va">z</span>,</span>
<span>    s <span class="op">=</span> <span class="va">path_plot_params_int</span><span class="op">$</span><span class="va">s</span>,</span>
<span>    dt <span class="op">=</span> <span class="va">path_plot_params_int</span><span class="op">$</span><span class="va">dt</span>,</span>
<span>    ter <span class="op">=</span> <span class="va">path_plot_params_int</span><span class="op">$</span><span class="va">ter</span> <span class="co"># Using ter=0 from params for this plot</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">example_trials_list_int</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">20</span><span class="op">)</span><span class="op">{</span> <span class="co"># Check if enough valid trials for hists</span></span>
<span>  <span class="fu">plot_ddm_paths_with_histograms</span><span class="op">(</span></span>
<span>    trials_data_list <span class="op">=</span> <span class="va">example_trials_list_int</span>,</span>
<span>    v_drift <span class="op">=</span> <span class="va">path_plot_params_int</span><span class="op">$</span><span class="va">v</span>,</span>
<span>    z_start <span class="op">=</span> <span class="va">path_plot_params_int</span><span class="op">$</span><span class="va">z</span>,</span>
<span>    a_threshold <span class="op">=</span> <span class="va">path_plot_params_int</span><span class="op">$</span><span class="va">a</span>,</span>
<span>    hist_binwidth <span class="op">=</span> <span class="fl">0.2</span>, <span class="co"># Adjust as needed</span></span>
<span>    max_time_to_plot <span class="op">=</span> <span class="fl">5</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"Not enough valid trials with diverse outcomes to generate combined plot."</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p><img src="02_simulating_diffusion_model_files/figure-html/unnamed-chunk-3-1.png" width="480" style="display: block; margin: auto;"></p>
</div>
</div>
<div class="section level2">
<h2 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<p>This vignette demonstrated the simulation of the Diffusion Decision
Model using our R functions. We explored the key parameters and observed
how they influence choice probabilities and the shape of RT
distributions. The DDM provides a powerful framework for understanding
the time course of simple decisions.</p>
<p>Further explorations could involve:</p>
<ul>
<li><p>Systematically varying each DDM parameter to observe its impact
(next vignette).</p></li>
<li><p>Implementing across-trial variability in parameters (e.g., sv,
sz, st0).</p></li>
<li><p>Comparing simulated data to empirical data.</p></li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Dogukan Nami Oztas.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer>
</div>





  </body>
</html>
